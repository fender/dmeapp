<div class="l-container l-container--sidebar">
	<div class="l-right-sidebar l-right-sidebar--library panel">
    <h5 class="library-filter-header">
      Categories
      <a href="" class="library-filters-clear right" ng-click="resetTerms(params.categories)" ng-show="!loadingResults && (params.categories | selectedTerms).length">Clear</a>
    </h5>
    <div class="library-filters">
      <label ng-repeat="category in params.categories" class="library-filter">
          <input type="checkbox" ng-model="category.selected" ng-disabled="loadingResults">{{category.name}}
      </label>
    </div>

    <h5 class="library-filter-header">
      Versions
      <a href="" class="library-filters-clear right" ng-click="resetTerms(params.versions)" ng-show="!loadingResults && (params.versions | selectedTerms).length">Clear</a>
    </h5>
    <div class="library-filters">
      <label ng-repeat="version in params.versions" class="library-filter">
          <input type="checkbox" ng-model="version.selected" ng-disabled="loadingResults">{{version.name}}
      </label>
    </div>

    <h5 class="library-filter-header">
      More Options
      <a href="" class="library-filters-clear right" ng-click="resetOptions()" ng-show="!loadingResults && (params.not_watched || params.watched || params.closed_captions)">Clear</a>
    </h5>
    <div class="library-filters">
      <label class="library-filter">
          <input type="checkbox" ng-model="params.not_watched" ng-disabled="loadingResults">Not Watched
      </label>
      <label class="library-filter">
          <input type="checkbox" ng-model="params.watched" ng-disabled="loadingResults">Watched
      </label>
      <label class="library-filter">
          <input type="checkbox" ng-model="params.closed_captions" ng-disabled="loadingResults">Closed Captions
      </label>
    </div>
  </div>

  <div class="l-content">
    <div class="library-header">
      <div class="left">
        <label ng-init="mediaFormat = 'list'">View</label>
        <span class="media-view-selector media-view-selector--list" ng-click="mediaFormat = 'list'">List</span>
        <span class="media-view-selector media-view-selector--grid" ng-click="mediaFormat = 'grid'">Grid</span>
      </div>

      <div class="right">
        <label>Sort by</label>
        <select ng-model="params.sort">
          <option value="created">Release date</option>
          <option value="title">Title</option>
        </select>
      </div>

      <div class="right">
        <label class="library-filter">
            <input type="checkbox" ng-model="params.group_by_series">Group by Series
        </label>
      </div>
    </div>

    <div class="library-status panel" ng-show="loadingResults">Loading...</div>
    <div class="library-status panel" ng-show="!loadingResults && !results.items">No results found.</div>

    <div class="media-view media-view--{{mediaFormat}}" ng-class="{'panel': mediaFormat == 'list'}" ng-show="results.items">
      <div class="media" ng-class="{'panel': mediaFormat == 'grid'}" ng-repeat="item in results.items">
        <div class="media-title">
          {{item.title}}
        </div>
        <!-- {{item.description.value}} -->

        <p class="media-subtitle">
          <span ng-repeat="tid in item.categories">
            {{params.categories[tid].name}}{{!$last || $last && item.versions ? ', ' : ''}}
          </span>
          <span ng-repeat="tid in item.versions">
            {{params.versions[tid].name}}{{!$last ? ', ' : ''}}
          </span>
        </p>

        <div class="media-links">
          {{item.videos.length}} videos <em class="text-green" ng-show="item.watched_count">({{item.watched_count}} watched)</em>
          <a href="">Add to Queue</a>
        </div>
      </div>
    </div>

    <dme-pager current-page="params.page" page-size="params.pagesize" total-pages="results.pager_total" total-items="results.pager_total_items" ng-show="results.items"></dme-pager>
  </div>
</div>
